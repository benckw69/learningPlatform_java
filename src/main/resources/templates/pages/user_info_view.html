<!DOCTYPE html>
<html>
  <head>
    <title th:text="${title}+' - 個人資料'"></title>
    <link rel='stylesheet' href='/css/style.css' th:href="@{/css/style.css}"/>
    <link rel='stylesheet' href='/css/userView.css' th:href="@{/css/userView.css}"/>
    <link rel='stylesheet' href='/css/backgroundImage.css' th:href="@{/css/backgroundImage.css}"/>
  </head>
  <body>
    <div class="content">
      <h1 th:text="${title}"></h1>
      <div th:replace="~{fragements/header}"></div> 
      <form>
        <div class="container">
          <h1>個人資料</h1>
          <hr>
      
          <label for="email"><b>電郵地址</b></label>
          <input type="email" th:value="${session.user.email}" readonly>
      
          <label for="username"><b>用戶名稱</b></label>
          <input type="text" th:value="${session.user.username}" readonly>

          <label for="balance"><b>餘額</b></label>
          <input type="number" th:value="${session.user.balance}" readonly>

          <label for="introduction" th:if="${session.user.type.name()} eq 'teacher'"><b>個人簡介</b></label>
          <p th:if="${session.user.type.name()} eq 'teacher'"><textarea rows="4" cols="50" style="width: 100%;"  th:text="${introduction}" readonly>
          </textarea></p>

          <label for="username"><b>推薦碼</b></label>
          <input type="text" th:value="'http://localhost:8888/register?ref='+${session.user.id}" readonly>
        
          <button type="button" class="registerbtn" onclick="window.location.href='/user/info/edit'">編輯資料</button>
          <button type="button" class="registerbtn" th:if="${session.user.loginMethod.name()} eq 'email'" onclick="window.location.href='/user/pw/edit'">更改密碼</button>
          <button type="button" class="registerbtn" style="background-color: red;" onclick="deleteUser()">刪除帳戶</button>
        </div>
      </form>
    </div>
    <script>
      function deleteUser(){
        if(confirm("你確定要刪除帳戶嗎？")){
          window.location.href='/users/delete';
        }
      }
      
      
    </script>
  </body>
</html>
